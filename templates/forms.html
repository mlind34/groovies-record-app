{% extends "layout.html" %}
{% block content %}

<!-- NEW CUSTOMER FORM -->
{% if title == 'Add Customer' %}

<div class="ui container">
    <form class="ui form" action="/customers/add-customer" method="POST">
        <h3 class="ui dividing header">Customer Information</h3>
        <div class="field">
            <label>Name</label>
                <div class="two fields">
                     <div class="field">
                        <input type="text" name="first-name" placeholder="First Name">
                    </div>
                    <div class="field">
                        <input type="text" name="last-name" placeholder="Last Name">
                    </div>
                </div>
        </div>

        <div class="two fields">
            <div class="field">
                <label>Street Address</label>
                <input type="text" name="street" placeholder="Street Address">
            </div>
            <div class="field">
                <label>City</label>
                <input type="text" name="city" placeholder="City">
            </div>
        </div>
            <div class="field" id="state">
                <label>State</label>
                <select class="ui fluid dropdown" name="state">
                    <option value="">State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
     
            <div class="two fields">
                <div class="field">
                    <label>E-mail</label>
                    <input type="text" name="email" placeholder="E-mail">
                </div>
                <div class="field">
                    <label>Phone</label>
                    <input type="text" name="phone" placeholder="Phone">
                </div>
            </div>

        <button class="ui primary button" type="submit">Add Customer</button>
    </form>
</div>


<!-- NEW DISTRIBUTOR FORM -->
{% elif title == 'Add Distributor' %}
<div class="ui container">
    <form class="ui form" action="/distributors/add-distributor" method="POST">
        <h3 class="ui dividing header">Distributors</h3>
        
            
            <div class="field">
                <label>Distributor Name</label> 
                <input type="text" name="distName" placeholder="Distributor Name">
            </div>
        
        

        <div class="two fields">
            <div class="field">
                <label>Street Address</label>
                <input type="text" name="street" placeholder="Street Address">
            </div>
            <div class="field">
                <label>City</label>
                <input type="text" name="city" placeholder="City">
            </div>
        </div>
            <div class="field" id="state">
                <label>State</label>
                <select class="ui fluid dropdown" name="state">
                    <option value="">State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
     
            
                
                <div class="field">
                    <label>Phone</label>
                    <input type="text" name="phone" placeholder="Phone">
                </div>

                <div class="field">
                    <label>Zip</label>
                    <input type="text" name="zip" placeholder="Zip Code">
                </div>
            

        <button class="ui primary button" type="submit">Add Distributor</button>
    </form>
</div>


<!-- ADD RECORD FORM -->
{% elif title == 'Add Record' %}

<div class="ui container">
    <form class="ui form" action="/records/add-record" method="POST">
        <h3 class="ui dividing header">Add Record</h3>
        <div class="two fields">
            <div class="field">
                <label>Price</label>
                <input type="text" name="price" placeholder="Price">
            </div>
            <div class="field">
                <label>Quantity</label>
                <input type="text" name="quantity" placeholder="Quantity">
            </div>
        </div>

        <div class="two fields">
            <div class="field">
                <label>Year</label>
                <input type="text" name="year" placeholder="Year">
            </div>
            <div class="field">
                <label>Artist</label>
                <input type="text" name="artist" placeholder="Artist">
            </div>
        </div>
     
            <div class="two fields">
                
                <div class="field">
                    <label>Name</label>
                    <input type="text" name="name" placeholder="Name">
                </div>
            </div>

            <div class="field">
                <label>Distributor</label>
                <input type="text" name="distributor" placeholder="Distributor">
            </div>

        <button class="ui primary button" type="submit">Submit</button>
    </form>
</div>

<!-- ADD PURCHASE FORM -->
{% elif title == 'Add Purchase' %}

<div class="ui container">
    <form class="ui form">
        <h3 class="ui dividing header">Add Purchase</h3>
        
            <div class="field">
                    <label>Purchase Date</label>
                    <input type="date" name="purchasedate" placeholder="mm/dd/yyyy">
            </div>
           
            <div class="field">
                <label>Method</label>
                <div class="methodRadios">
                    <label>Card</label>
                    <input type="radio" name="method" value="card" style="margin-right: 5%;">
                    <label>Cash</label>
                    <input type="radio" name="method" value="cash">
                </div>
            </div>

        
            <div class="ui toggle checkbox" style="margin: 20px 0px;">
                <input type="checkbox" name="public">
                <label>Payment Confirmed?</label>
              </div>
            
            <div class="field">
                <button class="ui primary button" type="submit">Submit</button>
            </div>
    </form>
</div>

<!-- CREATE ORDER FORM -->
{% elif distributor_order %}

    <h1>New Order</h1>

    <label for="">Select a Distributor</label>
    <form action="/orders/add-order/create-order" method="POST">
        <select name="Distributor" class="ui dropdown" id="">
            <option value="">Distributors</option>
            {% for distributor in distributor_order %}
            
            <option value="{{ distributor['name'] }}">{{ distributor['name'] }}</option>

            {% endfor %}
        </select>
        <input type="submit" value="Create Order">
    </form>

{% elif dist_inventory %}


<h1>Order for {{ dist_name }}</h1>

<h2>My Order:</h2>
<form action="/orders/add-order/confirm-order" method="POST" id="orderForm">
<table class="ui very basic collapsing celled table" >
    <thead>
      <tr><th>Cover</th><th>Title</th>
      <th>Price</th>
      <th>Quantity</th>
    </tr></thead>
    
    
    <tbody id="orderTable">
        
    
    
            <tr>
                <td></td>
                <td></td>
                <td><input type="hidden" id="orderTotal" name="total" >Total Price: </td>
                <td><input type="submit" class="ui primary button" value="Confirm Order"></td>
                
            </tr>
        
        </tbody>

  </table>
</form> 


<div class="ui link cards">

    
                    
    {% for i in dist_inventory %}
        
    <div class="card">
      <div class="image" id="albumImage">
        <img src={{ i['img'] }}>
      </div>
      <div class="content">
        <div class="header" id="albumTitle">{{ i['title'] }}</div>
        <div class="meta">
          <p id="albumYear">{{ i['year'] }}</p>
        </div>
        
      </div>
      
      <div class="extra content">
        <button type="submit" data-price="{{ i['price'] }}" data-quantity="1" 
        data-title="{{ i['title'] }}" data-img="{{ i['img'] }}" id="addAlbum" class="add-to-order">Add to Order</button>
        
        <span id="price">
          <i class="money icon"></i>
            ${{ i['price'] }}
            
        </span>
            
        <span id="quantity">
          quantity: {{ i['quantity'] }}
        </span>
        
      </div>
      
    </div>

    {% endfor %}

    {% elif customerID %}
    

 <script>
    orderTable = document.getElementById('orderTable')
    albumCards = document.getElementsByClassName('ui link cards');
    orderTotal = document.getElementById('orderTotal')
    total = 0
    albumCards[0].addEventListener('click', (event) => {
        let target = event.target;
        if(target.id == 'addAlbum'){
            let price = target.dataset.price;
            let quantity = target.dataset.quantity;
            let img = target.dataset.img;
            let title = target.dataset.title;
            total += Number(price)
            orderTotal.innerText = `Total Price: ${total}` 
            createRow(title, price, quantity, img);
        }
        
    });

    function createRow(title, price, quantity, img) {

        args = ['title', 'price', 'quantity']
        orderRow = document.createElement('tr');
        orderRow.setAttribute('class', 'order-item');
        imgCell = document.createElement('td')
        imgCell.setAttribute('id', 'imageData')
        imgCell.innerHTML = `<img src=${img}>`
        
        orderRow.append(imgCell)
        
        for(var i = 0; i < arguments.length - 1; i++){
            orderCell = document.createElement('td');
            orderInput = document.createElement('input');
            orderInput.setAttribute('name', `${args[i]}`)
            orderInput.setAttribute('type', 'hidden')
            orderInput.setAttribute('value', arguments[i])
            
            orderCell.innerText = arguments[i];
            orderCell.append(orderInput)
            orderRow.append(orderCell)
        }

        orderTable.append(orderRow)
    }
    
    // albumCards.addEventListener('click', function(){
    //     console.log(addAlbum)
    // })
    

</script>

{% endif %}



{% endblock %}